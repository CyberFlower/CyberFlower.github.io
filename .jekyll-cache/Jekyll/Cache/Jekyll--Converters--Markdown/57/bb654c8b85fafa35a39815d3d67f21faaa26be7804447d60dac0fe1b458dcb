I"‰/<p><a href="https://www.acmicpc.net/problem/6101">https://www.acmicpc.net/problem/6101</a></p>

<p>ê°„ë‹¨í•˜ì§€ë§Œì€ ì•Šì€ ë‹¤ì´ë‚˜ë¯¹ í”„ë¡œê·¸ë˜ë° ë¬¸ì œì…ë‹ˆë‹¤. ì €ëŠ” ë¨¼ì € í‘¼ ì¹œêµ¬ê°€ ì‹œê°„ë³µì¡ë„ê°€ O(n*sqrt(n))ìœ¼ë¡œ í’€ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ì—ˆìŒì—ë„ í‘¸ëŠ”ë° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë ¸ì–´ìš”â€¦</p>

<p>í•˜ì§€ë§Œ ì•„ì´ë””ì–´ì— ë¹„í•´ ì½”ë“œëŠ” ê°„ë‹¨í•©ë‹ˆë‹¤! ì½”ë“œë¥¼ í†µí•´ ì„¤ëª… ë“œë¦¬ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include&lt;bits/stdc++.h&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">SZ</span><span class="o">=</span><span class="mi">205</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">memo</span><span class="p">[</span><span class="n">SZ</span><span class="o">*</span><span class="n">SZ</span><span class="p">];</span>	<span class="c1">// memoization of minimum cost</span>
<span class="kt">int</span> <span class="n">crt_p</span><span class="p">[</span><span class="n">SZ</span><span class="o">*</span><span class="n">SZ</span><span class="p">];</span> 	<span class="c1">// current position of x(or past position)</span>
<span class="c1">// let 'number of food types'=A</span>
<span class="kt">int</span> <span class="n">first_p</span><span class="p">[</span><span class="n">SZ</span><span class="p">];</span> 	<span class="c1">// first_p[A]=first position become A</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
	<span class="n">ios</span><span class="o">::</span><span class="n">sync_with_stdio</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span> <span class="n">cin</span><span class="p">.</span><span class="n">tie</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">n</span><span class="o">&gt;&gt;</span><span class="n">m</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">SZ</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">first_p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">SZ</span><span class="o">*</span><span class="n">SZ</span><span class="p">;</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
		<span class="kt">int</span> <span class="n">x</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">x</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">nn</span><span class="o">=</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">nn</span><span class="p">;</span><span class="n">j</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">;</span><span class="n">j</span><span class="o">--</span><span class="p">){</span>
			<span class="k">if</span><span class="p">(</span><span class="n">crt_p</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">&lt;</span><span class="n">first_p</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="n">first_p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">first_p</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
		<span class="p">}</span>
		<span class="k">if</span><span class="p">(</span><span class="n">crt_p</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">!=</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="n">first_p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
		<span class="n">crt_p</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
		<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;=</span><span class="n">nn</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
			<span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">min</span><span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">memo</span><span class="p">[</span><span class="n">first_p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="n">j</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">memo</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<hr />

<p>ë°°ì—´ ì„¤ëª…</p>

<p>memo[n]: 1~në²ˆì§¸ ì—¼ì†Œë¥¼ ê·¸ë£¹í™” í•˜ëŠ”ë° ë“œëŠ” ìµœì†Œ ë¹„ìš©</p>

<p>crt_p[n]: ìŒì‹ nì„ ì›í–ˆë˜ ê°€ì¥ ìµœê·¼ ì—¼ì†Œ</p>

<p>first_p[n]: íŠ¹ì • ìœ„ì¹˜ xì—ì„œ ì¶œë°œí•˜ì—¬ ìŒì‹ ì§‘í•©ì˜ í¬ê¸°ê°€ nì´ ë˜ëŠ” ê°€ì¥ ìˆ«ìê°€ ì‘ì€ ì—¼ì†Œ</p>

<hr />

<p>ì´ í’€ì´ì˜ í•µì‹¬ì€</p>

<p>ì²«ì§¸, ì¡´ì¬í•˜ëŠ” ëª¨ë“  ê·¸ë£¹ì˜ í¬ê¸°ê°€ sqrt(n)ë³´ë‹¤ ì‘ê³ ,</p>

<p>ë§Œì•½ sqrt(n)ë³´ë‹¤ í° ê·¸ë£¹ì´ ìˆë‹¤ë©´ ë¹„ìš©ì´ ë°˜ë“œì‹œ në³´ë‹¤ í¬ê²Œ ë©ë‹ˆë‹¤! í•˜ë‚˜ì”© ë¬¶ëŠ” ê²ƒë³´ë‹¤ ë¹„ìš©ì´ ì»¤ì§€ê²Œ ë˜ì£ .</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;=</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
    <span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">min</span><span class="p">(</span><span class="n">memo</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">memo</span><span class="p">[</span><span class="n">first_p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="n">j</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// í˜„ì¬ first_p[j]ëŠ” nì—ì„œë¶€í„° ì‹œì‘í•˜ì—¬ ì§‘í•©ì˜ í¬ê¸°ê°€ jê°€ ë˜ëŠ” ê°€ì¥ ì‘ì€ ìœ„ì¹˜ì…ë‹ˆë‹¤.</span>
<span class="c1">// first_pë§Œ ì–´ë–»ê²Œ ì˜ í•˜ë©´ ë˜ê² êµ°ìš”.</span>
</code></pre></div></div>

<p>ë‘˜ì§¸, first_p ë°°ì—´ì„ ì±„ìš°ëŠ” ë° O(1)ì˜ ì‹œê°„ë³µì¡ë„ë§Œì´ í•„ìš”í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</p>

<p>first_pë¥¼ ì´ì°¨ì› ë°°ì—´ë¡œ ì •ì˜í–ˆë‹¤ë©´ first_p[x+1][n]ì„ first_p[x][n]ì— ê´€ë ¨ëœ ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë¥¼ ì´ì°¨ì› ë°°ì—´ì— ì „ë¶€ ì €ì¥í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.  first_p[x-1][n],first_p[x-2][n] â€¦ ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ì£ .</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span><span class="n">crt_p</span><span class="p">[</span><span class="n">new_cow</span><span class="p">]</span><span class="o">&lt;</span><span class="n">first_p</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="n">first_p</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">n</span><span class="p">]</span><span class="o">=</span><span class="n">first_p</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="k">else</span> <span class="n">first_p</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">n</span><span class="p">]</span><span class="o">=</span><span class="n">first_p</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">n</span><span class="p">]</span>
<span class="c1">//ì´ë¼ëŠ” ì í™”ì‹ì„</span>
<span class="k">if</span><span class="p">(</span><span class="n">crt_p</span><span class="p">[</span><span class="n">new_cow</span><span class="p">]</span><span class="o">&lt;</span><span class="n">first_p</span><span class="p">[</span><span class="n">n</span><span class="p">])</span> <span class="n">first_p</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">=</span><span class="n">first_p</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c1">//í•œ ì¤„ë¡œ ê³ ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ì§€ê¸ˆ ë³´ë‹ˆ 2ì°¨ì› ë°°ì—´ë¡œ ì§œëŠ”ê²Œ ì´í•´í•˜ê¸° ë” ì‰¬ì› ê² ë„¤ìš”)</span>
</code></pre></div></div>
<p>ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ë‹¨ìˆœ ì´ˆê¸°í™” ê³¼ì •ì…ë‹ˆë‹¤! ë!!</p>

<hr />
<h6 id="special-thanks-to-algorithm-provider-miryu-one-of-my-acmicpc-team">special thanks to algorithm provider Miryu, one of my acmicpc team</h6>
:ET